{
  "$schema": "../../../schema/m3-room.schema.json",
  "id": 197,
  "name": "Plasma Spark Room",
  "area": "Maridia",
  "subarea": "Inner",
  "subsubarea": "Yellow",
  "playable": true,
  "roomAddress": "0x7D340",
  "roomEnvironments": [{"heated": false}],
  "nodes": [
    {
      "id": 1,
      "name": "Plasma Spark Room Left Door (to Toilet)",
      "nodeType": "door",
      "nodeSubType": "green",
      "nodeAddress": "0x001a5ac",
      "doorEnvironments": [{"physics": "air"}],
      "locks": [
        {
          "name": "Plasma Spark Room Green Lock (to Toilet)",
          "lockType": "coloredDoor",
          "unlockStrats": [
            {
              "name": "Base",
              "notable": false,
              "requires": [
                "h_canOpenGreenDoors"
              ]
            }
          ]
        }
      ],
      "devNote": "FIXME Check if G-Mode can be set up through the Toilet."
    },
    {
      "id": 2,
      "name": "Plasma Spark Room Bottom Right Door (to Butterfly Room)",
      "nodeType": "door",
      "nodeSubType": "blue",
      "nodeAddress": "0x001a5a0",
      "doorEnvironments": [{"physics": "water"}],
      "runways": [
        {
          "name": "Base Runway - Plasma Spark Room Bottom Right Door (to Butterfly Room)",
          "length": 42,
          "startingDownTiles": 2,
          "gentleDownTiles": 2,
          "steepUpTiles": 3,
          "strats": [
            {
              "name": "Base",
              "notable": false,
              "requires": [
                "Gravity"
              ]
            }
          ],
          "openEnd": 1
        }
      ]
    },
    {
      "id": 3,
      "name": "Plasma Spark Room Center Right Door (to Bug Sand Hole)",
      "nodeType": "door",
      "nodeSubType": "blue",
      "nodeAddress": "0x001a5c4",
      "doorEnvironments": [{"physics": "air"}],
      "runways": [
        {
          "name": "Base Runway - Plasma Spark Room Center Right Door (to Bug Sand Hole)",
          "length": 4,
          "strats": [
            {
              "name": "Base",
              "notable": false,
              "requires": []
            }
          ],
          "openEnd": 1
        }
      ]
    },
    {
      "id": 4,
      "name": "Plasma Spark Room Top Right Door (to Kassiuz Room)",
      "nodeType": "door",
      "nodeSubType": "grey",
      "nodeAddress": "0x001a5b8",
      "doorEnvironments": [{"physics": "air"}],
      "runways": [
        {
          "name": "Base Runway - Plasma Spark Room Top Right Door (to Kassiuz Room)",
          "length": 6,
          "strats": [
            {
              "name": "Base",
              "notable": false,
              "requires": []
            }
          ],
          "openEnd": 1
        }
      ],
      "locks": [
        {
          "name": "Plasma Spark Room Grey Lock (to Kassiuz Room)",
          "lockType": "gameFlag",
          "unlockStrats": [
            {
              "name": "Base",
              "notable": false,
              "requires": [
                "f_DefeatedDraygon"
              ]
            }
          ]
        }
      ]
    },
    {
      "id": 5,
      "name": "Plasma Spark Room Top Junction",
      "nodeType": "junction",
      "nodeSubType": "junction",
      "devNote": "This exists mostly in case it ends up being helpful for handling walljumps later"
    }
  ],
  "enemies": [
    {
      "id": "e1",
      "groupName": "Plasma Spark Room Left Choot",
      "enemyName": "Choot",
      "quantity": 1,
      "homeNodes": [1]
    },
    {
      "id": "e2",
      "groupName": "Plasma Spark Room Bottom Choots",
      "enemyName": "Choot",
      "quantity": 2,
      "homeNodes": [3]
    },
    {
      "id": "e3",
      "groupName": "Plasma Spark Room Top Choots",
      "enemyName": "Choot",
      "quantity": 2,
      "homeNodes": [5]
    },
    {
      "id": "e4",
      "groupName": "Plasma Spark Room Owtches",
      "enemyName": "Owtch",
      "quantity": 4,
      "homeNodes": [2]
    },
    {
      "id": "e5",
      "groupName": "Plasma Spark Room Top Skulteras",
      "enemyName": "Skultera",
      "quantity": 2,
      "homeNodes": [2]
    }
  ],
  "links": [
    {
      "from": 1,
      "to": [
        {"id": 1},
        {"id": 2},
        {"id": 4},
        {"id": 5}
      ]
    },
    {
      "from": 2,
      "to": [
        {"id": 1},
        {
          "id": 3,
          "devNote": [
            "It is possible to X-ray climb higher, into a normally inaccessible area behind the door to Kassiuz Room.",
            "This doesn't appear to be useful: the door transition there, which appears to lead back to the normal part of Plasma Spark Room, instead transitions to the same room as the bottom right door (to Butterfly Room)."
          ]
        },
        {"id": 4},
        {"id": 5}
      ]
    },
    {
      "from": 3,
      "to": [
        {"id": 2},
        {"id": 3},
        {"id": 4},
        {"id": 5}
      ]
    },
    {
      "from": 4,
      "to": [
        {"id": 3},
        {
          "id": 5,
          "devNote": "This link is only for shinesparking. All other strats should go 4 -> 3 -> 5."
        }
      ]
    },
    {
      "from": 5,
      "to": [
        {"id": 1},
        {"id": 4}
      ]
    }
  ],
  "strats": [
    {
      "link": [1, 1],
      "name": "Shinespark",
      "notable": false,
      "entranceCondition": {
        "comeInWithSpark": {}
      },
      "requires": [
        {"shinespark": {"frames": 5, "excessFrames": 5}}
      ],
      "note": "Enter on the right side of the doorway to reduce the amount of energy used.",
      "devNote": "This strat is not useful in-room, but can satisfy a strat in the room before with an exit shinespark."
    },
    {
      "link": [1, 2],
      "name": "Base",
      "notable": false,
      "requires": []
    },
    {
      "link": [1, 4],
      "name": "G-Mode Morph",
      "notable": false,
      "requires": [
        {"comeInWithGMode": {
          "fromNodes": [1],
          "mode": "any",
          "artificialMorph": true
        }},
        "h_canArtificialMorphIBJ",
        {"or": [
          "h_canArtificialMorphSpringBallBombJump",
          "h_canArtificialMorphBombHorizontally"
        ]}
      ]
    },
    {
      "link": [1, 5],
      "name": "Base",
      "notable": false,
      "requires": [
        {"or": [
          "HiJump",
          "canWalljump",
          "SpaceJump",
          "canSpringBallJumpMidAir",
          {"and": [
            "h_canIBJ",
            {"or": [
              "canBombHorizontally",
              "Gravity"
            ]}
          ]},
          {"and": [
            "canSpringBallBombJump",
            "Morph",
            {"or": [
              "Bombs",
              {"ammo": {"type": "PowerBomb", "count": 3}}
            ]}
          ]}
        ]}
      ]
    },
    {
      "link": [1, 5],
      "name": "Shinespark",
      "notable": false,
      "requires": [
        "canShinechargeMovementComplex",
        "canMidairShinespark",
        {"canComeInCharged": {
          "fromNode": 1,
          "framesRemaining": 120
        }},
        {"shinespark": {"frames": 37, "excessFrames": 10}},
        {"or": [
          {"enemyDamage": {
            "enemy": "Choot",
            "type": "contact",
            "hits": 1
          }},
          {"enemyKill": {
            "enemies": [["Choot"]],
            "explicitWeapons": [
              "Missile",
              "Super",
              "ScrewAttack",
              "PseudoScrew",
              "Plasma",
              "Charge+Wave",
              "Charge+Spazer"
            ]
          }}
        ]}
      ],
      "note": "Spark vertically to avoid hitting the right ledge."
    },
    {
      "link": [1, 5],
      "name": "G-Mode Morph",
      "notable": false,
      "requires": [
        {"comeInWithGMode": {
          "fromNodes": [1],
          "mode": "any",
          "artificialMorph": true
        }},
        {"or": [
          {"and": [
            "h_canArtificialMorphIBJ",
            "h_canArtificialMorphBombHorizontally"
          ]},
          {"and": [
            "h_canArtificialMorphSpringBallBombJump",
            {"ammo": {"type": "PowerBomb", "count": 3}}
          ]}
        ]}
      ]
    },
    {
      "link": [2, 1],
      "name": "Base",
      "notable": false,
      "requires": [
        "Gravity",
        {"or": [
          "canWalljump",
          "HiJump",
          "canSpringBallJumpMidAir",
          "h_canFly"
        ]}
      ]
    },
    {
      "link": [2, 1],
      "name": "Suitless Jump Assist",
      "notable": false,
      "requires": [
        "canSuitlessMaridia",
        "HiJump",
        "canSpringBallJumpMidAir"
      ]
    },
    {
      "link": [2, 1],
      "name": "Suitless Frozen Skultera",
      "notable": false,
      "requires": [
        "canSuitlessMaridia",
        "HiJump",
        "canUseFrozenEnemies",
        "h_canCrouchJumpDownGrab"
      ]
    },
    {
      "link": [2, 1],
      "name": "Suitless Shinespark",
      "notable": false,
      "requires": [
        "canWaterShineCharge",
        "canShinechargeMovementComplex",
        {"or": [
          {"and": [
            {"canShineCharge": {
              "usedTiles": 33,
              "openEnd": 2
            }},
            {"shinespark": {"frames": 90, "excessFrames": 50}}
          ]},
          {"and": [
            {"canShineCharge": {
              "usedTiles": 33,
              "openEnd": 2
            }},
            {"shinespark": {"frames": 90, "excessFrames": 57}},
            {"or": [
              "canWalljump",
              "HiJump",
              "canSpringBallJumpMidAir",
              "h_canFly"
            ]}
          ]}
        ]},
        {"adjacentRunway": {
          "fromNode": 2,
          "usedTiles": 0.5,
          "physics": ["normal"],
          "overrideRunwayRequirements": true,
          "useFrames": 45
        }}
      ],
      "note": [
        "Start the dash as close to the door transition as possible to help avoid getting hit by the first Owtch. Store the shine charge while high up on the left slope.",
        "Spark up while on the right side of the platform. To avoid the Owtch on the platform, it may help to jump on the left side of the platform then jump again and spark midair above the right side."
      ]
    },
    {
      "link": [2, 1],
      "name": "G-Mode Morph",
      "notable": false,
      "requires": [
        {"comeInWithGMode": {
          "fromNodes": [2],
          "mode": "any",
          "artificialMorph": true
        }},
        "Gravity",
        "h_canArtificialMorphIBJ"
      ]
    },
    {
      "link": [2, 3],
      "name": "Base",
      "notable": false,
      "requires": [
        "Gravity"
      ]
    },
    {
      "link": [2, 3],
      "name": "Suitless Jump Assist",
      "notable": false,
      "requires": [
        "canSuitlessMaridia",
        {"or": [
          "HiJump",
          "canSpringBallJumpMidAir"
        ]}
      ]
    },
    {
      "link": [2, 3],
      "name": "Plasma Spark Fish Climb",
      "notable": true,
      "requires": [
        "canSuitlessMaridia",
        "canTrickyUseFrozenEnemies",
        {"or": [
          {"and": [
            "canTrickyJump",
            "h_canCrouchJumpDownGrab"
          ]},
          {"and": [
            "canStationarySpinJump",
            "canSunkenTileWideWallClimb"
          ]}
        ]}
      ],
      "note": [
        "Use the Skultera to get onto the top right platform. There are two distinct ways to get up using the top Skultera.",
        "1. Freeze it at the bottom of its path to the left. Crouch jump and down grab to get onto it. The positioning is very precise.",
        "2. Freeze it about a half-tile from the right wall and very quickly stationary spin jump and quickly walljump mash to get up before it thaws.",
        "This may be easier by jumping away from the wall, towards the fish, to gain height faster."
      ]
    },
    {
      "link": [2, 3],
      "name": "G-Mode Deep Stuck X-Ray Climb",
      "notable": false,
      "requires": [
        {"comeInWithGMode": {
          "fromNodes": [2],
          "mode": "direct",
          "artificialMorph": false
        }},
        "canXRayClimb"
      ],
      "note": "Climb up 2 screens."
    },
    {
      "link": [2, 3],
      "name": "Shinespark Deep Stuck X-Ray Climb",
      "notable": false,
      "requires": [
        {"canComeInCharged": {
          "fromNode": 2,
          "framesRemaining": 1
        }},
        {"shinespark": {"frames": 1, "excessFrames": 1}},
        "canShinesparkDeepStuck",
        "canXRayClimb"
      ],
      "note": "Climb up 2 screens."
    },
    {
      "link": [2, 3],
      "name": "G-Mode Morph",
      "notable": false,
      "requires": [
        {"comeInWithGMode": {
          "fromNodes": [2],
          "mode": "any",
          "artificialMorph": true
        }},
        "Gravity",
        "h_canArtificialMorphIBJ"
      ]
    },
    {
      "link": [2, 4],
      "name": "G-Mode Morph",
      "notable": false,
      "requires": [
        {"comeInWithGMode": {
          "fromNodes": [2],
          "mode": "any",
          "artificialMorph": true
        }},
        "Gravity",
        "h_canArtificialMorphIBJ"
      ]
    },
    {
      "link": [2, 5],
      "name": "Suitless Shinespark",
      "notable": false,
      "requires": [
        "canWaterShineCharge",
        "canShinechargeMovementComplex",
        {"canShineCharge": {
          "usedTiles": 33,
          "openEnd": 2
        }},
        {"shinespark": {"frames": 90, "excessFrames": 11}},
        {"adjacentRunway": {
          "fromNode": 2,
          "usedTiles": 0.5,
          "physics": ["normal"],
          "overrideRunwayRequirements": true,
          "useFrames": 45
        }}
      ],
      "note": [
        "Start the dash as close to the door transition as possible to help avoid getting hit by the first Owtch. Store the shine charge while high up on the left slope.",
        "Spark up while on the right side of the platform. To avoid the Owtch on the platform, it may help to jump on the left side of the platform then jump again and spark midair above the right side."
      ],
      "devNote": [
        "The excess frames are only low enough to get to the top right overhang, as it is free to jump to 5.",
        "With other items or wall jumps and lower energy, it is possible to first spark to 1, as it has more excess frames."
      ]
    },
    {
      "link": [3, 2],
      "name": "Base",
      "notable": false,
      "requires": []
    },
    {
      "link": [3, 3],
      "name": "Choot Farm",
      "notable": false,
      "requires": [
        "canBePatient",
        {"resetRoom": {
          "nodes": [3],
          "mustStayPut": false
        }},
        {"refill": ["Energy", "Missile", "Super"]}
      ]
    },
    {
      "link": [3, 4],
      "name": "Base",
      "notable": false,
      "requires": [
        {"or": [
          "canConsecutiveWalljump",
          "h_canFly"
        ]}
      ]
    },
    {
      "link": [3, 4],
      "name": "Frozen Choot",
      "notable": false,
      "requires": [
        "canTrickyUseFrozenEnemies",
        "HiJump",
        {"or": [
          "canWalljump",
          {"and": [
            "canTrickyDashJump",
            "canSpringBallJumpMidAir"
          ]}
        ]}
      ]
    },
    {
      "link": [3, 4],
      "name": "Shinespark",
      "notable": false,
      "requires": [
        "canShinechargeMovementComplex",
        {"or": [
          {"and": [
            "canMidairShinespark",
            {"canComeInCharged": {
              "fromNode": 3,
              "framesRemaining": 120
            }},
            {"shinespark": {"frames": 30, "excessFrames": 3}}
          ]},
          {"and": [
            {"canComeInCharged": {
              "fromNode": 3,
              "framesRemaining": 120
            }},
            {"shinespark": {"frames": 43, "excessFrames": 3}}
          ]}
        ]}
      ],
      "note": [
        "Shinespark from the left side of the water, or the very edge of the land.",
        "It helps to face right before Shinesparking."
      ]
    },
    {
      "link": [3, 4],
      "name": "G-Mode Morph",
      "notable": false,
      "requires": [
        {"comeInWithGMode": {
          "fromNodes": [3],
          "mode": "any",
          "artificialMorph": true
        }},
        "h_canArtificialMorphIBJ"
      ]
    },
    {
      "link": [3, 5],
      "name": "Base",
      "notable": false,
      "requires": [
        {"or": [
          "canConsecutiveWalljump",
          "h_canFly"
        ]},
        {"enemyDamage": {
          "enemy": "Choot",
          "type": "contact",
          "hits": 1
        }}
      ]
    },
    {
      "link": [3, 5],
      "name": "Screw Kill",
      "notable": false,
      "requires": [
        {"or": [
          "canConsecutiveWalljump",
          "SpaceJump"
        ]},
        {"or": [
          {"enemyKill": {
            "enemies": [["Choot"]],
            "explicitWeapons": ["ScrewAttack"]
          }},
          {"and": [
            {"or": [
              "SpaceJump",
              {"and": [
                "canConsecutiveWalljump",
                "canWalljumpWithCharge"
              ]}
            ]},
            {"enemyKill": {
              "enemies": [["Choot"]],
              "explicitWeapons": ["PseudoScrew"]
            }}
          ]}
        ]}
      ]
    },
    {
      "link": [3, 5],
      "name": "Carefully Kill Choot",
      "notable": false,
      "requires": [
        {"or": [
          "canConsecutiveWalljump",
          "h_canFly"
        ]},
        {"or": [
          "canTrickyJump",
          {"and": [
            "canCarefulJump",
            {"enemyKill": {
              "enemies": [["Choot"]],
              "explicitWeapons": ["Missile", "Super"]
            }}
          ]}
        ]}
      ],
      "note": [
        "Shoot the Choot either before landing or from the safety of the ledge edge.",
        "If bomb jumping, there is a timing for rolling under the Choot."
      ]
    },
    {
      "link": [3, 5],
      "name": "Kill Choot and Reclimb",
      "notable": false,
      "requires": [
        {"or": [
          "canConsecutiveWalljump",
          "h_canFly"
        ]},
        {"or": [
          {"enemyKill": {
            "enemies": [["Choot"]],
            "explicitWeapons": ["Wave", "Spazer", "PowerBomb"]
          }},
          {"and": [
            "canBeVeryPatient",
            {"enemyKill": {
              "enemies": [["Choot"]]
            }}
          ]}
        ]}
      ],
      "note": "To avoid damage, the Choot can be killed and then Samus can climb back up again.",
      "devNote": "Missile kill strats could fit here with a reclimb or by landing on the ledge, with the same requirements."
    },
    {
      "link": [3, 5],
      "name": "Shinespark",
      "notable": false,
      "requires": [
        "canShinechargeMovementComplex",
        "canCarefulJump",
        {"canComeInCharged": {
          "fromNode": 3,
          "framesRemaining": 145
        }},
        {"shinespark": {"frames": 49}}
      ],
      "note": [
        "Shinespark from the tile to the right of the Choot.",
        "It helps to face right before Shinesparking."
      ]
    },
    {
      "link": [3, 5],
      "name": "G-Mode Morph",
      "notable": false,
      "requires": [
        {"comeInWithGMode": {
          "fromNodes": [3],
          "mode": "any",
          "artificialMorph": true
        }},
        "h_canArtificialMorphIBJ"
      ]
    },
    {
      "link": [4, 3],
      "name": "Base",
      "notable": false,
      "requires": []
    },
    {
      "link": [4, 5],
      "name": "Shinespark",
      "notable": false,
      "requires": [
        "canShinechargeMovementComplex",
        "canMidairShinespark",
        {"canComeInCharged": {
          "fromNode": 4,
          "framesRemaining": 45
        }},
        {"shinespark": {"frames": 13}}
      ],
      "note": [
        "A diagonal spark may take damage from the Choot",
        "It helps to face right before Shinesparking."
      ]
    },
    {
      "link": [4, 5],
      "name": "G-Mode Morph",
      "notable": false,
      "requires": [
        {"comeInWithGMode": {
          "fromNodes": [4],
          "mode": "any",
          "artificialMorph": true
        }},
        "h_canArtificialMorphIBJ"
      ]
    },
    {
      "link": [5, 1],
      "name": "Base",
      "notable": false,
      "requires": []
    },
    {
      "link": [5, 4],
      "name": "Base",
      "notable": false,
      "requires": []
    }
  ]
}