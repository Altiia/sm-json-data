{
  "$schema": "../../../schema/m3-room.schema.json",
  "id": 61,
  "name": "Pink Brinstar Hopper Room",
  "area": "Brinstar",
  "subarea": "Pink",
  "playable": true,
  "roomAddress": "0x7A130",
  "roomEnvironments": [{"heated": false}],
  "nodes": [
    {
      "id": 1,
      "name": "Left Door",
      "nodeType": "door",
      "nodeSubType": "grey",
      "nodeAddress": "0x0018fb2",
      "doorEnvironments": [{"physics": "air"}],
      "locks": [
        {
          "name": "Pink Brinstar Hoppers Left Grey Lock (to Big Pink)",
          "lockType": "killEnemies",
          "unlockStrats": [
            {
              "name": "Base",
              "notable": false,
              "requires": [
                {"obstaclesCleared": ["A"]}
              ]
            }
          ],
          "yields": ["f_ZebesAwake"]
        }
      ]
    },
    {
      "id": 2,
      "name": "Right Door",
      "nodeType": "door",
      "nodeSubType": "grey",
      "nodeAddress": "0x0018fbe",
      "doorEnvironments": [{"physics": "air"}],
      "locks": [
        {
          "name": "Pink Brinstar Hoppers Right Grey Lock (to E-Tank)",
          "lockType": "killEnemies",
          "unlockStrats": [
            {
              "name": "Base",
              "notable": false,
              "requires": [
                {"obstaclesCleared": ["A"]}
              ]
            }
          ],
          "yields": ["f_ZebesAwake"],
          "devNote": "Hoppers must be killed, possibly by going to 1 and back."
        }
      ]
    },
    {
      "id": 3,
      "name": "Top Junction",
      "nodeType": "junction",
      "nodeSubType": "junction",
      "note": "Represents being on the Grapple block if going right or to the right of the gate, if going left."
    }
  ],
  "obstacles": [
    {
      "id": "A",
      "name": "Hoppers",
      "obstacleType": "enemies"
    },
    {
      "id": "B",
      "name": "Blue Gate",
      "obstacleType": "inanimate"
    },
    {
      "id": "C",
      "name": "In G-Mode - Can't Use Grapple, Open Door",
      "obstacleType": "abstract"
    }
  ],
  "enemies": [
    {
      "id": "e1",
      "groupName": "Pink Wave Gate Small Sidehoppers",
      "enemyName": "Sm. Sidehopper",
      "quantity": 2,
      "homeNodes": [1]
    },
    {
      "id": "e2",
      "groupName": "Pink Wave Gate Sidehopper",
      "enemyName": "Sidehopper",
      "quantity": 1,
      "homeNodes": [1]
    }
  ],
  "reusableRoomwideNotable": [
    {
      "name": "Pink Hoppers Shinespark into the Wall to Ride the Elevator",
      "note": "Shinesparking horizontally into the wall will trigger the elevator as Samus's echos hit it."
    }
  ],
  "links": [
    {
      "from": 1,
      "to": [
        {"id": 1},
        {"id": 2},
        {"id": 3}
      ]
    },
    {
      "from": 2,
      "to": [
        {"id": 2},
        {"id": 3}
      ]
    },
    {
      "from": 3,
      "to": [
        {"id": 1},
        {"id": 2},
        {"id": 3}
      ]
    }
  ],
  "strats": [
    {
      "link": [1, 1],
      "name": "Leave With Runway",
      "requires": [
        {"obstaclesCleared": ["A"]}
      ],
      "exitCondition": {
        "leaveWithRunway": {
          "length": 1,
          "openEnd": 1
        }
      }
    },
    {
      "link": [1, 1],
      "name": "Power Beam Kill",
      "requires": [
        {"enemyDamage": {
          "enemy": "Sm. Sidehopper",
          "type": "contact",
          "hits": 1
        }},
        {"enemyDamage": {
          "enemy": "Sidehopper",
          "type": "contact",
          "hits": 3
        }}
      ],
      "clearsObstacles": ["A"],
      "note": [
        "This assumes you don't know you're entering this room, and take a Small Sidehopper hit quickly.",
        "The Small Sidehoppers may deliver more of the hits, but this is an assumed worst case scenario"
      ],
      "devNote": "FIXME: It is possible to use frozen hoppers as a platform to more easily get up to the Grapple block."
    },
    {
      "link": [1, 1],
      "name": "Intermediate Weapon Kill",
      "requires": [
        {"enemyDamage": {
          "enemy": "Sm. Sidehopper",
          "type": "contact",
          "hits": 1
        }},
        {"enemyDamage": {
          "enemy": "Sidehopper",
          "type": "contact",
          "hits": 1
        }},
        {"or": [
          "Spazer",
          "Wave"
        ]}
      ],
      "clearsObstacles": ["A"],
      "note": "This assumes you don't know you're entering this room, and take a Small Sidehopper hit quickly."
    },
    {
      "link": [1, 1],
      "name": "Fast Weapon Kill",
      "requires": [
        {"enemyDamage": {
          "enemy": "Sm. Sidehopper",
          "type": "contact",
          "hits": 1
        }},
        {"enemyKill": {
          "enemies": [
            ["Sidehopper", "Sm. Sidehopper", "Sm. Sidehopper"]
          ],
          "explicitWeapons": [
            "Missile",
            "Super",
            "PowerBomb",
            "ScrewAttack",
            "Plasma"
          ]
        }}
      ],
      "clearsObstacles": ["A"],
      "note": "This assumes you don't know you're entering this room, and take a Small Sidehopper hit quickly."
    },
    {
      "link": [1, 1],
      "name": "Kill on Entry (Screw Attack)",
      "requires": [
        "canPrepareForNextRoom",
        "ScrewAttack"
      ],
      "clearsObstacles": ["A"]
    },
    {
      "link": [1, 1],
      "name": "Kill on Entry (Come In With Blue Speed)",
      "entranceCondition": {
        "comeInShinecharging": {
          "length": 0,
          "openEnd": 1
        }
      },
      "requires": [
        "canPrepareForNextRoom"
      ],
      "clearsObstacles": ["A"]
    },
    {
      "link": [1, 1],
      "name": "Kill on Entry (Come In With Spark)",
      "entranceCondition": {
        "comeInWithSpark": {}
      },
      "requires": [
        "canPrepareForNextRoom",
        {"shinespark": {"frames": 24}}
      ],
      "clearsObstacles": ["A"]
    },
    {
      "link": [1, 1],
      "name": "Pink Hopper Reverse Gate Glitch",
      "notable": true,
      "requires": [
        {"obstaclesCleared": ["A"]},
        "canOffScreenSuperShot"
      ],
      "clearsObstacles": ["B"],
      "note": [
        "This strat involves shooting a Super diagonally from the correct height while flush against the left wall.",
        "Its acceleration will cause it to clip into the blue gate off-screen."
      ],
      "devNote": "The reverse gate glitch pretty much requires killing the enemies first, so it's required here."
    },
    {
      "link": [1, 1],
      "name": "G-Mode Indirect to Despawn Gate",
      "entranceCondition": {
        "comeInWithGMode": {
          "mode": "indirect",
          "morphed": false
        }
      },
      "requires": [],
      "clearsObstacles": ["B", "C"]
    },
    {
      "link": [1, 1],
      "name": "G-Mode Morph Indirect to Despawn Gate Power Bomb Kill",
      "entranceCondition": {
        "comeInWithGMode": {
          "mode": "indirect",
          "morphed": true
        }
      },
      "requires": [
        {"enemyDamage": {
          "enemy": "Sm. Sidehopper",
          "type": "contact",
          "hits": 1
        }},
        {"ammo": {"type": "PowerBomb", "count": 1}}
      ],
      "clearsObstacles": ["A", "B", "C"],
      "note": "Kill the Sidehoppers with a Power Bomb upon entry.",
      "devNote": "A Power Bomb strat could be included to just kill the Sidehoppers, but it only saves a little energy since you'll need Wave or Supers for the gate."
    },
    {
      "link": [1, 1],
      "name": "Crystal Flash",
      "requires": [
        {"obstaclesCleared": ["A"]},
        "h_canCrystalFlash"
      ]
    },
    {
      "link": [1, 1],
      "name": "G-Mode Setup - Get Hit By Hopper",
      "notable": false,
      "requires": [],
      "exitCondition": {
        "leaveWithGModeSetup": {}
      },
      "note": [
        "This is possible to do without taking a second hit:",
        "Enter the room in a jump, then shoot down to open the door and land in the doorsill."
      ]
    },
    {
      "link": [1, 1],
      "name": "G-Mode Regain Mobility",
      "requires": [
        {"enemyDamage": {
          "enemy": "Sidehopper",
          "type": "contact",
          "hits": 1
        }}
      ],
      "gModeRegainMobility": {}
    },
    {
      "link": [1, 2],
      "name": "IBJ",
      "requires": [
        "h_canIBJ",
        {"obstaclesCleared": ["A"]},
        {"or": [
          "Wave",
          {"obstaclesCleared": ["B"]}
        ]}
      ],
      "devNote": [
        "IBJ requires the enemies to be killed",
        "The reverse gate glitch may be executed earlier from node 1 -> 1."
      ]
    },
    {
      "link": [1, 2],
      "name": "G-Mode Morph Indirect to Despawn Gate with IBJ",
      "entranceCondition": {
        "comeInWithGMode": {
          "mode": "indirect",
          "morphed": true
        }
      },
      "requires": [
        "h_canArtificialMorphIBJ",
        {"enemyDamage": {
          "enemy": "Sm. Sidehopper",
          "type": "contact",
          "hits": 1
        }},
        {"or": [
          {"enemyDamage": {
            "enemy": "Sidehopper",
            "type": "contact",
            "hits": 3
          }},
          {"ammo": {"type": "PowerBomb", "count": 1}}
        ]}
      ],
      "clearsObstacles": ["A", "B"],
      "note": "Kill the Sidehoppers with Bombs or a Power Bomb, then IBJ up onto the Grapple block."
    },
    {
      "link": [1, 3],
      "name": "Base",
      "requires": [
        {"or": [
          "canPrepareForNextRoom",
          {"obstaclesCleared": ["A"]},
          {"enemyDamage": {
            "enemy": "Sm. Sidehopper",
            "type": "contact",
            "hits": 1
          }}
        ]},
        {"or": [
          "SpaceJump",
          "canWalljump",
          {"and": [
            "Grapple",
            {"obstaclesNotCleared": ["C"]}
          ]},
          {"and": [
            "HiJump",
            "canSpringBallJumpMidAir"
          ]}
        ]}
      ],
      "devNote": "The reverse gate glitch may be executed earlier from node 1 -> 1."
    },
    {
      "link": [1, 3],
      "name": "Speedy Jump Onto Grapple Block",
      "requires": [
        "HiJump",
        "canTrickyJump",
        "SpeedBooster",
        {"obstaclesCleared": ["A"]}
      ],
      "note": "Run from the left side to the right, then jump just before or at the end of the runway to get up onto the Grapple block."
    },
    {
      "link": [1, 3],
      "name": "Spring Ball from the Doorframe",
      "requires": [
        {"doorUnlockedAtNode": 1},
        "canTrickySpringBallJump",
        "canTrickyJump",
        {"obstaclesCleared": ["A"]},
        {"obstaclesNotCleared": ["C"]}
      ],
      "note": [
        "Perform a very precise Spring Ball jump from the doorframe onto the Grapple block.",
        "A running spin jump or crouch jump can be used."
      ]
    },
    {
      "link": [1, 3],
      "name": "Speedy Jump",
      "entranceCondition": {
        "comeInJumping": {
          "speedBooster": true,
          "minTiles": 6.4375
        }
      },
      "requires": [
        "canPrepareForNextRoom",
        "HiJump",
        "canDisableEquipment",
        "canCarefulJump"
      ],
      "note": "Jump into the room and onto the Grapple block."
    },
    {
      "link": [1, 3],
      "name": "Tricky Speedy Jump",
      "entranceCondition": {
        "comeInJumping": {
          "speedBooster": true,
          "minTiles": 1.4375
        }
      },
      "requires": [
        "canPrepareForNextRoom",
        "HiJump",
        "canTrickyDashJump",
        "canDisableEquipment"
      ],
      "note": "Jump into the room and onto the Grapple block. Requires a runway of only 2 tiles in the adjacent room.",
      "devNote": "It can be done with no open ends, but it's a fair bit tighter."
    },
    {
      "link": [1, 3],
      "name": "Cross-Room Spring Ball Jump",
      "entranceCondition": {
        "comeInJumping": {
          "speedBooster": true,
          "minTiles": 7
        }
      },
      "requires": [
        "canPrepareForNextRoom",
        "canTrickySpringBallJump",
        "canCarefulJump"
      ],
      "note": "Perform a Spring Ball jump from a speedy jump in the previous room."
    },
    {
      "link": [1, 3],
      "name": "Tricky Cross-Room Spring Ball Jump",
      "entranceCondition": {
        "comeInJumping": {
          "speedBooster": false,
          "minTiles": 0.4375
        }
      },
      "requires": [
        "canPrepareForNextRoom",
        "canTrickySpringBallJump",
        "canTrickyJump"
      ],
      "note": [
        "Perform a very precise Spring Ball jump through the transition and onto the Grapple block.",
        "A running spin jump or crouch jump can be used."
      ]
    },
    {
      "link": [1, 3],
      "name": "G-Mode Morph IBJ",
      "entranceCondition": {
        "comeInWithGMode": {
          "mode": "any",
          "morphed": true
        }
      },
      "requires": [
        "h_canArtificialMorphIBJ",
        {"enemyDamage": {
          "enemy": "Sm. Sidehopper",
          "type": "contact",
          "hits": 1
        }},
        {"or": [
          {"enemyDamage": {
            "enemy": "Sidehopper",
            "type": "contact",
            "hits": 3
          }},
          {"ammo": {"type": "PowerBomb", "count": 1}}
        ]}
      ],
      "clearsObstacles": ["A"],
      "note": "Kill the Sidehoppers with Bombs or a Power Bomb, then IBJ up onto the Grapple block. Use Wave to get through."
    },
    {
      "link": [1, 3],
      "name": "Pink Brinstar Hopper X-Ray Climb",
      "notable": true,
      "entranceCondition": {
        "comeInWithDoorStuckSetup": {}
      },
      "requires": [
        "canXRayClimb",
        {"enemyDamage": {
          "enemy": "Sidehopper",
          "type": "contact",
          "hits": 2
        }}
      ],
      "note": [
        "To minimize damage from the Hoppers, get stuck in the door relatively high and move quickly.",
        "Climb up somewhat less than 1 screen, until Samus' head appears between 1 and 3 tiles below the door.",
        "Then perform a turn-around spin jump to the right to get on top of the Grapple block."
      ],
      "devNote": [
        "It is possible to avoid all Hopper damage, but it is not clear if this can be done reliably.",
        "Two hits from the big Sidehopper appears to be a worst-case scenario."
      ]
    },
    {
      "link": [2, 2],
      "name": "Leave With Runway",
      "requires": [],
      "exitCondition": {
        "leaveWithRunway": {
          "length": 6,
          "openEnd": 1
        }
      }
    },
    {
      "link": [2, 2],
      "name": "Crystal Flash",
      "requires": [
        "h_canCrystalFlash"
      ],
      "clearsObstacles": ["A"]
    },
    {
      "link": [2, 2],
      "name": "Plasma SBA Sidehopper Kill",
      "requires": [
        "Charge",
        "Plasma",
        "canSpecialBeamAttack",
        {"ammo": {"type": "PowerBomb", "count": 1}}
      ],
      "clearsObstacles": ["A"],
      "devNote": "This also raises the elevator, but using this method to get up is a bit obscure and would use the notable from 2->3."
    },
    {
      "link": [2, 3],
      "name": "Base",
      "requires": [
        {"or": [
          "canWalljump",
          "h_canFly",
          {"and": [
            "HiJump",
            "canSpringBallJumpMidAir"
          ]}
        ]}
      ],
      "clearsObstacles": ["B"]
    },
    {
      "link": [2, 3],
      "name": "Ride the Elevator",
      "requires": [
        "h_canUseMorphBombs"
      ],
      "clearsObstacles": ["B"],
      "note": "The elevator can be raised by hitting below the shot block with a Bomb."
    },
    {
      "link": [2, 3],
      "name": "Elevator with Power Bombs or Wave",
      "requires": [
        {"or": [
          "h_canUsePowerBombs",
          "Wave"
        ]}
      ],
      "clearsObstacles": ["A", "B"],
      "note": "Use a Power Bomb against the left wall or Wave to kill the enemies and ride the elevator."
    },
    {
      "link": [2, 3],
      "name": "Pink Hoppers Shot Clip to Ride the Elevator",
      "notable": true,
      "requires": [
        {"or": [
          {"ammo": {"type": "Missile", "count": 1}},
          {"ammo": {"type": "Super", "count": 1}},
          "Spazer",
          {"and": [
            "Charge",
            "Plasma"
          ]},
          {"and": [
            "Charge",
            "Ice",
            "canSpecialBeamAttack",
            {"ammo": {"type": "PowerBomb", "count": 1}}
          ]}
        ]}
      ],
      "clearsObstacles": ["B"],
      "note": [
        "The elevator can be raised by clipping a shot into the floor, shot while falling with the right amount of vertical speed.",
        "This can be done with a Missile, Super, or charged Spazer or Plasma shot, a well positioned angle Spazer shot while crouched, or an  or Ice SBA."
      ],
      "devNote": [
        "FIXME: Do we need leniency or another tech for this?",
        "This is only notable as a way to avoid wall jumps."
      ]
    },
    {
      "link": [2, 3],
      "name": "Speedy HiJump",
      "entranceCondition": {
        "comeInRunning": {
          "speedBooster": true,
          "minTiles": 7
        }
      },
      "requires": [
        "HiJump"
      ],
      "note": "Jump at the end of the runway in-room. Assumes there is a runway in the adjacent room of at least 7 tiles."
    },
    {
      "link": [2, 3],
      "name": "Tricky Speedy HiJump",
      "entranceCondition": {
        "comeInRunning": {
          "speedBooster": true,
          "minTiles": 6
        }
      },
      "requires": [
        "HiJump",
        "canTrickyJump"
      ],
      "note": "Jump at the very end of the runway in-room. Requires a runway in the adjacent room of at least 6 tiles."
    },
    {
      "link": [2, 3],
      "name": "Tricky Speedy Spring Ball",
      "entranceCondition": {
        "comeInRunning": {
          "speedBooster": true,
          "minTiles": 7
        }
      },
      "requires": [
        "canTrickySpringBallJump",
        "canTrickyDashJump"
      ],
      "note": "Jump at the very end of the runway in-room. Requires a runway in the adjacent room of at least 7 tiles."
    },
    {
      "link": [2, 3],
      "name": "Pink Hoppers Screw and Kago to Ride the Elevator",
      "notable": true,
      "requires": [
        "canKago",
        {"or": [
          "ScrewAttack",
          "canPseudoScrew"
        ]},
        {"or": [
          {"and": [
            "HiJump",
            {"or": [
              "canCrouchJump",
              "canDownGrab"
            ]}
          ]},
          "canTrickyJump",
          "Morph"
        ]}
      ],
      "clearsObstacles": ["B"],
      "note": [
        "Start the elevator ride by using Screw Attack or Pseudo Screw in the hole.",
        "Kago the elevator to fall back in and hit the elevator again. This is much easier while the elevator is still rising, but can still be done with Morph afterwards.",
        "Unless HiJump is owned, this will need to be done once more to get high enough to get to the blue gate."
      ],
      "devNote": [
        "FIXME: Add Shinespark strats to get up to the gate, or to spark against the wall to raise the elevator.",
        "This is only notable as a way to avoid wall jumps."
      ]
    },
    {
      "link": [2, 3],
      "name": "Shinespark, Come in Shinecharging",
      "entranceCondition": {
        "comeInShinecharging": {
          "length": 5,
          "openEnd": 1
        }
      },
      "requires": [
        {"or": [
          {"shinespark": {"frames": 22, "excessFrames": 4}},
          {"and": [
            "canMidairShinespark",
            {"shinespark": {"frames": 15, "excessFrames": 3}}
          ]},
          {"and": [
            "canMidairShinespark",
            "HiJump",
            {"shinespark": {"frames": 12, "excessFrames": 4}}
          ]}
        ]}
      ],
      "clearsObstacles": ["B"]
    },
    {
      "link": [2, 3],
      "name": "Shinespark, Come in Shinecharged",
      "entranceCondition": {
        "comeInShinecharged": {
          "framesRequired": 1
        }
      },
      "requires": [
        {"shinespark": {"frames": 22, "excessFrames": 4}}
      ],
      "clearsObstacles": ["B"]
    },
    {
      "link": [2, 3],
      "name": "Pink Hoppers Shinespark into the Wall to Ride the Elevator, Come in Shinecharging",
      "notable": true,
      "entranceCondition": {
        "comeInShinecharging": {
          "length": 5,
          "openEnd": 1
        }
      },
      "requires": [
        "canHorizontalShinespark",
        {"shinespark": {"frames": 1, "excessFrames": 1}}
      ],
      "clearsObstacles": ["B"],
      "reusableRoomwideNotable": "Pink Hoppers Shinespark into the Wall to Ride the Elevator",
      "note": "Shinesparking horizontally into the wall will trigger the elevator as Samus's echos hit it."
    },
    {
      "link": [2, 3],
      "name": "Pink Hoppers Shinespark into the Wall to Ride the Elevator, Come in Shinecharged",
      "notable": true,
      "entranceCondition": {
        "comeInShinecharged": {
          "framesRequired": 45
        }
      },
      "requires": [
        "canHorizontalShinespark",
        {"shinespark": {"frames": 1, "excessFrames": 1}}
      ],
      "clearsObstacles": ["B"],
      "reusableRoomwideNotable": "Pink Hoppers Shinespark into the Wall to Ride the Elevator",
      "note": "Shinesparking horizontally into the wall will trigger the elevator as Samus's echos hit it."
    },
    {
      "link": [2, 3],
      "name": "Pink Hoppers Shinespark into the Wall to Ride the Elevator, Come in Shinesparking",
      "notable": true,
      "entranceCondition": {
        "comeInWithSpark": {}
      },
      "requires": [
        "canHorizontalShinespark",
        {"shinespark": {"frames": 15, "excessFrames": 6}}
      ],
      "clearsObstacles": ["B"],
      "reusableRoomwideNotable": "Pink Hoppers Shinespark into the Wall to Ride the Elevator",
      "note": "Shinesparking horizontally into the wall will trigger the elevator as Samus's echos hit it."
    },
    {
      "link": [2, 3],
      "name": "G-Mode Morph IBJ",
      "entranceCondition": {
        "comeInWithGMode": {
          "mode": "any",
          "morphed": true
        }
      },
      "requires": [
        "h_canArtificialMorphIBJ"
      ],
      "clearsObstacles": ["B"]
    },
    {
      "link": [2, 3],
      "name": "G-Mode Morph Elevator with Power Bomb",
      "entranceCondition": {
        "comeInWithGMode": {
          "mode": "any",
          "morphed": true
        }
      },
      "requires": [
        {"ammo": {"type": "PowerBomb", "count": 1}}
      ],
      "clearsObstacles": ["A", "B"],
      "note": "Using a power bomb against the left wall will kill the enemies and trigger the elevator."
    },
    {
      "link": [3, 1],
      "name": "Dead Sidehoppers",
      "requires": [
        {"obstaclesCleared": ["A"]}
      ]
    },
    {
      "link": [3, 1],
      "name": "Tank a Hit",
      "requires": [
        {"or": [
          {"enemyDamage": {
            "enemy": "Sidehopper",
            "type": "contact",
            "hits": 1
          }},
          {"and": [
            "canCarefulJump",
            {"enemyDamage": {
              "enemy": "Sm. Sidehopper",
              "type": "contact",
              "hits": 1
            }}
          ]}
        ]}
      ],
      "note": "Jump far to the left in order to hit a small Sidehopper instead of a large one."
    },
    {
      "link": [3, 1],
      "name": "Screw Kill",
      "requires": [
        "ScrewAttack",
        {"or": [
          "canCarefulJump",
          {"enemyDamage": {
            "enemy": "Sm. Sidehopper",
            "type": "contact",
            "hits": 1
          }}
        ]}
      ],
      "clearsObstacles": ["A"],
      "note": "It is possible to kill the Sidehoppers damageless by jumping into the bottom left corner then quickly spin jumping again."
    },
    {
      "link": [3, 2],
      "name": "Base",
      "requires": [
        {"obstaclesCleared": ["B"]},
        {"or": [
          "canCarefulJump",
          "canWalljump",
          "SpaceJump",
          "Grapple"
        ]}
      ]
    },
    {
      "link": [3, 3],
      "name": "Open the Gate",
      "requires": [
        "Wave"
      ],
      "clearsObstacles": ["B"]
    }
  ]
}